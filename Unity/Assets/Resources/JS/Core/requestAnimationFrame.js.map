{"version":3,"sources":["/Users/yomob/Documents/GitHub/AptosUnitySDK/Unity/TS/src/Core/requestAnimationFrame.ts"],"sourcesContent":["interface AnimationFrame {\n    requestAnimationFrame?:Function,\n    cancelAnimationFrame?:Function,\n    setTimeout?:Function,\n    clearTimeout?:Function\n};\n\nconst obj:AnimationFrame = globalThis || window || {};\nconst _requestAnimationFrame = obj.requestAnimationFrame || obj.setTimeout;\nconst _cancelAnimationFrame =  obj.cancelAnimationFrame || obj.clearTimeout;\n\nlet lastTime:number;\nconst customRequestAnimationFrame = (callback:Function,intervalTime:number):number=>{\n    const fun = ()=>{\n        const currentTime:number = performance.now();                                               // 当前时间\n        lastTime = lastTime || currentTime;                                                         // 防止首次执行无历史时间\n        const timeCouse:number = currentTime - lastTime;                                            // 距离上一帧时间\n        const isNext:boolean = intervalTime-timeCouse <= 0 || timeCouse === 0;                      // 判断是否执行下一帧\n        if(isNext){\n            lastTime = currentTime;\n            callback(timeCouse,currentTime);\n        }else{\n            callback();\n        };\n    };\n    return _requestAnimationFrame(fun);\n};\nconst customCancelAnimationFrame = timer => {\n    _cancelAnimationFrame(timer);\n};\nexport const requestAnimationFrame = customRequestAnimationFrame;\nexport const cancelAnimationFrame = customCancelAnimationFrame;"],"names":["obj","globalThis","window","_requestAnimationFrame","requestAnimationFrame","setTimeout","_cancelAnimationFrame","cancelAnimationFrame","clearTimeout","lastTime","customRequestAnimationFrame","callback","intervalTime","fun","currentTime","performance","now","timeCouse","isNext","customCancelAnimationFrame","timer"],"mappings":"AAOA,MAAMA,MAAqBC,cAAcC,UAAU,CAAC;AACpD,MAAMC,yBAAyBH,IAAII,qBAAqB,IAAIJ,IAAIK,UAAU;AAC1E,MAAMC,wBAAyBN,IAAIO,oBAAoB,IAAIP,IAAIQ,YAAY;AAE3E,IAAIC;AACJ,MAAMC,8BAA8B,CAACC,UAAkBC,eAA6B;IAChF,MAAMC,MAAM,IAAI;QACZ,MAAMC,cAAqBC,YAAYC,GAAG;QAAkD,OAAO;QACnGP,WAAWA,YAAYK;QAAqE,cAAc;QAC1G,MAAMG,YAAmBH,cAAcL;QAAqD,UAAU;QACtG,MAAMS,SAAiBN,eAAaK,aAAa,KAAKA,cAAc;QAAwB,YAAY;QACxG,IAAGC,QAAO;YACNT,WAAWK;YACXH,SAASM,WAAUH;QACvB,OAAK;YACDH;QACJ,CAAC;IACL;IACA,OAAOR,uBAAuBU;AAClC;AACA,MAAMM,6BAA6BC,CAAAA,QAAS;IACxCd,sBAAsBc;AAC1B;AACA,OAAO,MAAMhB,wBAAwBM,4BAA4B;AACjE,OAAO,MAAMH,uBAAuBY,2BAA2B"}